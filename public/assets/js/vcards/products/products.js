(()=>{listenClick("#addProductBtn",(function(){$("#addProductModal").modal("show")})),listenHiddenBsModal("#addProductModal",(function(e){$("#addProductForm")[0].reset(),$("#vcardProduct").val(null).trigger("change"),$("#productPreview").attr("src",defaultServiceIconUrl),$(".cancel-service").hide()})),listenHiddenBsModal("#showProductModal",(function(){$("#showName,#showDesc,#showPrice").empty(),$("#productPreview").attr("src",defaultServiceIconUrl)})),listenChange("#productIcon",(function(){changeImg(this,"#productIconValidationErrors","#productPreview",defaultServiceIconUrl),$(".cancel-service").show()})),listenClick(".cancel-service",(function(){$("#productPreview").attr("src",defaultServiceIconUrl)})),listenSubmit("#addProductForm",(function(e){e.preventDefault(),$("#productSave").prop("disabled",!0),$.ajax({url:route("vcard.products.store"),type:"POST",data:new FormData(this),contentType:!1,processData:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$("#addProductModal").modal("hide"),Livewire.emit("refresh"),$("#productSave").prop("disabled",!1))},error:function(e){displayErrorMessage(e.responseJSON.message),$("#productSave").prop("disabled",!1)}})})),listenHiddenBsModal("#editProductModal",(function(e){$(".cancel-edit-service").hide()})),listenClick(".product-delete-btn",(function(e){var t=$(e.currentTarget).data("id");deleteItem(route("vcard.products.destroy",t),products)})),listenClick(".product-edit-btn",(function(t){var r,c=$(t.currentTarget).data("id");r=c,$.ajax({url:route("vcard.products.edit",r),type:"GET",success:function(t){t.success&&($("#productId").val(t.data.id),$("#editName").val(t.data.name),null!=t.data.currency_id&&$("#editCurrencyId").val(t.data.currency.id).trigger("change"),$("#editPrice").val(t.data.price),$("#editDescription").val(t.data.description),$("#editProductPreview").attr("src",t.data.product_icon),$("#editProductModal").modal("show"),e=t.data.product_icon)},error:function(e){displayErrorMessage(e.responseJSON.message)}})}));var e="";listenChange("#editProductIcon",(function(){changeImg(this,"#editProductIconValidation","#editProductPreview",e),$(".cancel-edit-service").show()})),listenClick(".cancel-edit-service",(function(){$("#editProductPreview").attr("src",e)})),listenSubmit("#editProductForm",(function(e){e.preventDefault();var t=$("#productId").val();$.ajax({url:route("vcard.products.update",t),type:"POST",data:new FormData(this),contentType:!1,processData:!1,success:function(e){e.success&&(displaySuccessMessage(e.message),$("#editProductModal").modal("hide"),Livewire.emit("refresh"))},error:function(e){displayErrorMessage(e.responseJSON.message)}})})),listenClick(".product-view-btn",(function(e){var t,r=$(e.currentTarget).data("id");t=r,$.ajax({url:route("vcard.products.edit",t),type:"GET",success:function(e){if(e.success){$("#showName").append(e.data.name),e.data.currency_id&&null!=e.data.price?$("#showPrice").append(e.data.currency.currency_icon+" "+e.data.price):null!=e.data.price?$("#showPrice").append(e.data.price):$("#showPrice").append("N/A");var t=document.createElement("textarea");t.innerHTML=e.data.description,$("#showDesc").append(t.value),$("#showServiceIcon").attr("src",e.data.product_icon),$("#showProductModal").modal("show")}},error:function(e){displayErrorMessage(e.responseJSON.message)}})}))})();