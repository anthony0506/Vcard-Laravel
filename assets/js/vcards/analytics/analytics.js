(()=>{document.addEventListener("DOMContentLoaded",t);var a="bar";function t(){var t=$("#timeRange"),e=moment(),r=moment().subtract("30","days"),s=e.clone().endOf("days");function n(t,e){$.ajax({type:"GET",url:route("vcard.chart",vcardId),dataType:"json",data:{start_date:t,end_date:e,vcardId},success:function(t){!function(t){$("#weeklyUserBarChartContainer").html(""),$("canvas#weeklyUserBarChart").remove(),$("#weeklyUserBarChartContainer").append('<canvas id="weeklyUserBarChart" height="275" width="905" style="display: block; width: 905px; height: 500px;"></canvas>');var e=t.data,r={labels:e.weeklyLabels,datasets:[{label:visitors,backgroundColor:"#009ef7",data:e.totalVisitorCount}]},s=$("#weeklyUserBarChart");new Chart(s,{type:a,data:r,options:{scales:{y:{ticks:{min:0,precision:0}}}}})}(t)},cache:!1})}t.on("apply.daterangepicker",(function(a,t){!0,r=t.startDate.format("YYYY-MM-D  H:mm:ss"),s=t.endDate.format("YYYY-MM-D  H:mm:ss"),n(r,s)})),window.cb=function(a,e){t.find("span").html(a.format("MMM D, YYYY")+" - "+e.format("MMM D, YYYY"))},t.daterangepicker({startDate:r,endDate:s,opens:"left",showDropdowns:!0,autoUpdateInput:!1,ranges:{"This Week":[moment().startOf("week"),moment().endOf("week")],"Last Week":[moment().startOf("week").subtract(7,"days"),moment().startOf("week").subtract(1,"days")]}},cb),cb(r,s),n(r.format("YYYY-MM-D H:mm:ss"),s.format("YYYY-MM-D H:mm:ss"));var o=$(".range_inputs > button.applyBtn");$(document).on("click",".ranges li",(function(){"Custom Range"===$(this).data("range-key")?o.css("display","initial"):o.css("display","none")})),o.css("display","none")}listenClick("#changeChart",(function(){"bar"===a?(a="line",$(".chart").removeClass("fa-chart-area"),$(".chart").addClass("fa-chart-bar"),t()):(a="bar",$(".chart").addClass("fa-chart-area"),$(".chart").removeClass("fa-chart-bar"),t())}))})();