listenClick(".makePayment",(function(){var e=this,a={plan_id:$(this).data("id"),from_pricing:"undefined"!=typeof fromPricing?fromPricing:null,price:$(this).data("plan-price"),payment_type:$("#paymentType option:selected").val()};$(this).addClass("disabled"),$(".makePayment").text("Please Wait..."),$.post(route("purchase-subscription"),a).done((function(e){if(void 0===e.data)return displaySuccessMessage(e.message),setTimeout((function(){window.location.href=subscriptionPlans}),3e3),!0;var a=e.data.sessionId;stripe.redirectToCheckout({sessionId:a}).then((function(e){$(this).html(Lang.get("messages.subscription.purchase")).removeClass("disabled"),$(".makePayment").attr("disabled",!1),displaySuccessMessage(e.message)}))})).catch((function(a){$(e).html(Lang.get("messages.subscription.purchase")).removeClass("disabled"),$(".makePayment").attr("disabled",!1),displayErrorMessage(a.responseJSON.message)}))})),listenChange("#paymentType",(function(){var e=$(this).val();isEmpty(e)&&($(".proceed-to-payment").addClass("d-none"),$(".RazorPayPayment").addClass("d-none"),$(".stripePayment").addClass("d-none"),$(".ManuallyPayment").addClass("d-none")),1==e&&($(".proceed-to-payment").addClass("d-none"),$(".RazorPayPayment").addClass("d-none"),$(".stripePayment").removeClass("d-none"),$(".ManuallyPayment").addClass("d-none")),2==e&&($(".proceed-to-payment").addClass("d-none"),$(".paypalPayment").removeClass("d-none"),$(".RazorPayPayment").addClass("d-none"),$(".ManuallyPayment").addClass("d-none")),3==e&&($(".proceed-to-payment").addClass("d-none"),$(".paypalPayment").addClass("d-none"),$(".RazorPayPayment").removeClass("d-none"),$(".ManuallyPayment").addClass("d-none")),4==e&&($(".proceed-to-payment").addClass("d-none"),$(".paypalPayment").addClass("d-none"),$(".RazorPayPayment").addClass("d-none"),$(".ManuallyPayment").removeClass("d-none"))})),listenClick(".paymentByPaypal",(function(){$(".paymentByPaypal").text("Please Wait...");var e="undefined"!=typeof fromPricing?fromPricing:null;$(this).addClass("disabled"),$.ajax({type:"GET",url:route("paypal.init"),data:{planId:$(this).data("id"),from_pricing:e,payment_type:$("#paymentType option:selected").val()},success:function(e){if(e.url&&(window.location.href=e.url),201===e.statusCode){var a="";$.each(e.result.links,(function(e,s){"approve"==s.rel&&(a=s.href)})),location.href=a}},error:function(e){displayErrorMessage(e.responseJSON.message),$(".paymentByPaypal").text("Pay / Switch Plan")},complete:function(){}})})),listenClick(".paymentByRazorPay",(function(){var e="undefined"!=typeof fromPricing?fromPricing:null;$(".paymentByRazorPay").text("Please Wait..."),$(this).addClass("disabled"),$.ajax({type:"GET",url:route("razorpay.init"),data:{planId:$(this).data("id"),from_pricing:e,payment_type:$("#paymentType option:selected").val()},success:function(e){if(e.success){var a=e.data,s=a.id,n=a.amount,t=a.name,i=a.email,o=a.contact;options.amount=n,options.order_id=s,options.prefill.name=t,options.prefill.email=i,options.prefill.contact=o;var d=new Razorpay(options);d.open(),d.on("payment.failed")}},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){}})})),listenClick(".manuallyPay",(function(){$(".paymentByRazorPay").text("Please Wait..."),$(this).addClass("disabled");var e=$(this).attr("data-id"),a={planId:$(this).data("id"),from_pricing:"undefined"!=typeof fromPricing?fromPricing:null,price:$(this).data("plan-price"),paymentToPay:paymentPay,endDate,payment_type:$("#paymentType option:selected").val()};$.ajax({type:"POST",url:route("subscription.manual",e),data:a,success:function(e){displaySuccessMessage(e.message),window.location.href=subscriptionPlans},error:function(e){displayErrorMessage(e.responseJSON.message)},complete:function(){}})})),listenClick(".plan-zero",(function(){var e=this,a=$(this).attr("data-id");$(this).html('\n            <div class="spinner-border spinner-border-sm" role="status">\n                <span class="sr-only"> </span>\n            </div> '.concat(Lang.get("messages.common.loading"))).addClass("disabled"),$.post(route("subscription.plan-zero",a)).done((function(e){displaySuccessMessage(e.message),setTimeout((function(){location.replace(route("subscription.index"))}),2e3)})).catch((function(a){$(e).attr("disabled",!1),$(e).html(Lang.get("messages.subscription.purchase")).removeClass("disabled"),displayErrorMessage(a.responseJSON.message)}))})),listenClick(".freePayment",(function(){var e=this;if("undefined"!=typeof getLoggedInUserdata&&""==getLoggedInUserdata)return window.location.href=route("login"),!0;if(0===$(this).data("plan-price")){$(this).addClass("disabled");var a={plan_id:$(this).data("id"),price:$(this).data("plan-price")};return $.post(route("purchase-subscription"),a).done((function(e){displaySuccessMessage(e.message),setTimeout((function(){location.reload()}),5e3)})).catch((function(a){$(e).html(Lang.get("messages.subscription.choose_plan")).removeClass("disabled"),$(".freePayment").attr("disabled",!1),displayErrorMessage(a.responseJSON.message)})),!0}}));